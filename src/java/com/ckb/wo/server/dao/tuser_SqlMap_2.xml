<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="tuser">
    <resultMap class="com.ckb.wo.client.model.User" id="ibatorgenerated_BaseResultMap">
        <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 05 13:34:27 SGT 2010.
    -->
        <result column="atuser_employee_id" jdbcType="VARCHAR" property="employeeId" />
        <result column="atuser_first_name" jdbcType="VARCHAR" property="firstName" />
        <result column="atuser_middle_name" jdbcType="VARCHAR" property="middleName" />
        <result column="atuser_last_name" jdbcType="VARCHAR" property="lastName" />
        <result column="atuser_grantfrom" jdbcType="DATE" property="grantfrom" />
        <result column="atuser_grantto" jdbcType="DATE" property="grantto" />
        <result column="atuser_bossemployeeid" jdbcType="VARCHAR" property="bossemployeeid" />
        <result column="atuser_email" jdbcType="VARCHAR" property="email" />
        <result column="atuser_area_id" jdbcType="VARCHAR" property="areaId" />
        <result column="atuser_division_id" jdbcType="VARCHAR" property="divisionId" />
        <result column="atuser_department_id" jdbcType="VARCHAR" property="departmentId" />
        <result column="atuser_station_id" jdbcType="VARCHAR" property="stationId" />
        <result column="atuser_job_title_id" jdbcType="VARCHAR" property="jobTitleId" />
        <result column="atuser_level_id" jdbcType="VARCHAR" property="levelId" />
        <result column="atuser_isactiveuser" jdbcType="BIT" property="isactiveuser" />
    </resultMap>
    <sql id="ibatorgenerated_Example_Where_Clause">
        <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 05 13:34:27 SGT 2010.
    -->
        <iterate conjunction="or" prepend="where" property="oredCriteria" removeFirstPrepend="iterate">
            <isEqual compareValue="true" property="oredCriteria[].valid">
                (
                <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithoutValue">
                    $oredCriteria[].criteriaWithoutValue[]$
                </iterate>
                <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithSingleValue">
                    $oredCriteria[].criteriaWithSingleValue[].condition$
                    #oredCriteria[].criteriaWithSingleValue[].value#
                </iterate>
                <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithListValue">
                    $oredCriteria[].criteriaWithListValue[].condition$
                    <iterate close=")" conjunction="," open="(" property="oredCriteria[].criteriaWithListValue[].values">
                        #oredCriteria[].criteriaWithListValue[].values[]#
                    </iterate>
                </iterate>
                <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithBetweenValue">
                    $oredCriteria[].criteriaWithBetweenValue[].condition$
                    #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
                    #oredCriteria[].criteriaWithBetweenValue[].values[1]#
                </iterate>
                )
            </isEqual>
        </iterate>
    </sql>
    <select id="ibatorgenerated_selectByExample" parameterClass="com.ckb.wo.client.model.UserExample" resultMap="ibatorgenerated_BaseResultMap">
        <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 05 13:34:27 SGT 2010.
        -->
        select atuser.employee_id as atuser_employee_id, atuser.first_name as atuser_first_name,
        atuser.middle_name as atuser_middle_name, atuser.last_name as atuser_last_name,
        atuser.grantfrom as atuser_grantfrom, atuser.grantto as atuser_grantto, atuser.bossemployeeid
        as atuser_bossemployeeid, atuser.email as atuser_email, atuser.area_id as atuser_area_id,
        atuser.division_id as atuser_division_id, atuser.department_id as atuser_department_id,
        atuser.station_id as atuser_station_id, atuser.job_title_id as atuser_job_title_id,
        atuser.level_id as atuser_level_id, atuser.isactiveuser as atuser_isactiveuser
        from tuser atuser
        <isParameterPresent>
            <include refid="tuser.ibatorgenerated_Example_Where_Clause" />
            <isNotNull property="orderByClause">
                order by $orderByClause$
            </isNotNull>
            <isNotNull property="limitClause">
                limit $limitClause$
            </isNotNull>
        </isParameterPresent>
    </select>
    <select id="ibatorgenerated_selectByPrimaryKey" parameterClass="com.ckb.wo.client.model.User" resultMap="ibatorgenerated_BaseResultMap">
        <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 05 13:34:27 SGT 2010.
        -->
        select atuser.employee_id as atuser_employee_id, atuser.first_name as atuser_first_name,
        atuser.middle_name as atuser_middle_name, atuser.last_name as atuser_last_name,
        atuser.grantfrom as atuser_grantfrom, atuser.grantto as atuser_grantto, atuser.bossemployeeid
        as atuser_bossemployeeid, atuser.email as atuser_email, atuser.area_id as atuser_area_id,
        atuser.division_id as atuser_division_id, atuser.department_id as atuser_department_id,
        atuser.station_id as atuser_station_id, atuser.job_title_id as atuser_job_title_id,
        atuser.level_id as atuser_level_id, atuser.isactiveuser as atuser_isactiveuser
        from tuser atuser
        where atuser.employee_id = #employeeId:VARCHAR#
    </select>
    <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.ckb.wo.client.model.User">
        <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 05 13:34:27 SGT 2010.
        -->
        delete from tuser
        where employee_id = #employeeId:VARCHAR#
    </delete>
    <delete id="ibatorgenerated_deleteByExample" parameterClass="com.ckb.wo.client.model.UserExample">
        <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 05 13:34:27 SGT 2010.
        -->
        delete from tuser atuser
        <include refid="tuser.ibatorgenerated_Example_Where_Clause" />
    </delete>
    <insert id="ibatorgenerated_insert" parameterClass="com.ckb.wo.client.model.User">
        <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 05 13:34:27 SGT 2010.
        -->
        insert into tuser (employee_id, first_name, middle_name, last_name, grantfrom, grantto,
        bossemployeeid, email, area_id, division_id, department_id, station_id, job_title_id,
        level_id, isactiveuser)
        values (#employeeId:VARCHAR#, #firstName:VARCHAR#, #middleName:VARCHAR#, #lastName:VARCHAR#,
        #grantfrom:DATE#, #grantto:DATE#, #bossemployeeid:VARCHAR#, #email:VARCHAR#, #areaId:VARCHAR#,
        #divisionId:VARCHAR#, #departmentId:VARCHAR#, #stationId:VARCHAR#, #jobTitleId:VARCHAR#,
        #levelId:VARCHAR#, #isactiveuser:BIT#)
    </insert>
    <insert id="ibatorgenerated_insertSelective" parameterClass="com.ckb.wo.client.model.User">
        <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 05 13:34:27 SGT 2010.
        -->
        insert into tuser
        <dynamic prepend="(">
            <isNotNull prepend="," property="employeeId">
                employee_id
            </isNotNull>
            <isNotNull prepend="," property="firstName">
                first_name
            </isNotNull>
            <isNotNull prepend="," property="middleName">
                middle_name
            </isNotNull>
            <isNotNull prepend="," property="lastName">
                last_name
            </isNotNull>
            <isNotNull prepend="," property="grantfrom">
                grantfrom
            </isNotNull>
            <isNotNull prepend="," property="grantto">
                grantto
            </isNotNull>
            <isNotNull prepend="," property="bossemployeeid">
                bossemployeeid
            </isNotNull>
            <isNotNull prepend="," property="email">
                email
            </isNotNull>
            <isNotNull prepend="," property="areaId">
                area_id
            </isNotNull>
            <isNotNull prepend="," property="divisionId">
                division_id
            </isNotNull>
            <isNotNull prepend="," property="departmentId">
                department_id
            </isNotNull>
            <isNotNull prepend="," property="stationId">
                station_id
            </isNotNull>
            <isNotNull prepend="," property="jobTitleId">
                job_title_id
            </isNotNull>
            <isNotNull prepend="," property="levelId">
                level_id
            </isNotNull>
            <isNotNull prepend="," property="isactiveuser">
                isactiveuser
            </isNotNull>
            )
        </dynamic>
        values
        <dynamic prepend="(">
            <isNotNull prepend="," property="employeeId">
                #employeeId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="firstName">
                #firstName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="middleName">
                #middleName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="lastName">
                #lastName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="grantfrom">
                #grantfrom:DATE#
            </isNotNull>
            <isNotNull prepend="," property="grantto">
                #grantto:DATE#
            </isNotNull>
            <isNotNull prepend="," property="bossemployeeid">
                #bossemployeeid:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="email">
                #email:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="areaId">
                #areaId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="divisionId">
                #divisionId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="departmentId">
                #departmentId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="stationId">
                #stationId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="jobTitleId">
                #jobTitleId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="levelId">
                #levelId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="isactiveuser">
                #isactiveuser:BIT#
            </isNotNull>
            )
        </dynamic>
    </insert>
    <select id="ibatorgenerated_countByExample" parameterClass="com.ckb.wo.client.model.UserExample" resultClass="java.lang.Integer">
        <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 05 13:34:27 SGT 2010.
        -->
        select count(*) from tuser atuser
        <include refid="tuser.ibatorgenerated_Example_Where_Clause" />
    </select>
    <update id="ibatorgenerated_updateByExampleSelective">
        <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 05 13:34:27 SGT 2010.
        -->
        update tuser atuser
        <dynamic prepend="set">
            <isNotNull prepend="," property="record.employeeId">
                atuser.employee_id = #record.employeeId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.firstName">
                atuser.first_name = #record.firstName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.middleName">
                atuser.middle_name = #record.middleName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.lastName">
                atuser.last_name = #record.lastName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.grantfrom">
                atuser.grantfrom = #record.grantfrom:DATE#
            </isNotNull>
            <isNotNull prepend="," property="record.grantto">
                atuser.grantto = #record.grantto:DATE#
            </isNotNull>
            <isNotNull prepend="," property="record.bossemployeeid">
                atuser.bossemployeeid = #record.bossemployeeid:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.email">
                atuser.email = #record.email:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.areaId">
                atuser.area_id = #record.areaId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.divisionId">
                atuser.division_id = #record.divisionId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.departmentId">
                atuser.department_id = #record.departmentId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.stationId">
                atuser.station_id = #record.stationId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.jobTitleId">
                atuser.job_title_id = #record.jobTitleId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.levelId">
                atuser.level_id = #record.levelId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.isactiveuser">
                atuser.isactiveuser = #record.isactiveuser:BIT#
            </isNotNull>
        </dynamic>
        <isParameterPresent>
            <include refid="tuser.ibatorgenerated_Example_Where_Clause" />
        </isParameterPresent>
    </update>
    <update id="ibatorgenerated_updateByExample">
        <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 05 13:34:27 SGT 2010.
        -->
        update tuser atuser
        set atuser.employee_id = #record.employeeId:VARCHAR#,
        atuser.first_name = #record.firstName:VARCHAR#,
        atuser.middle_name = #record.middleName:VARCHAR#,
        atuser.last_name = #record.lastName:VARCHAR#,
        atuser.grantfrom = #record.grantfrom:DATE#,
        atuser.grantto = #record.grantto:DATE#,
        atuser.bossemployeeid = #record.bossemployeeid:VARCHAR#,
        atuser.email = #record.email:VARCHAR#,
        atuser.area_id = #record.areaId:VARCHAR#,
        atuser.division_id = #record.divisionId:VARCHAR#,
        atuser.department_id = #record.departmentId:VARCHAR#,
        atuser.station_id = #record.stationId:VARCHAR#,
        atuser.job_title_id = #record.jobTitleId:VARCHAR#,
        atuser.level_id = #record.levelId:VARCHAR#,
        atuser.isactiveuser = #record.isactiveuser:BIT#
        <isParameterPresent>
            <include refid="tuser.ibatorgenerated_Example_Where_Clause" />
        </isParameterPresent>
    </update>
    <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.ckb.wo.client.model.User">
        <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 05 13:34:27 SGT 2010.
        -->
        update tuser
        <dynamic prepend="set">
            <isNotNull prepend="," property="firstName">
                first_name = #firstName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="middleName">
                middle_name = #middleName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="lastName">
                last_name = #lastName:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="grantfrom">
                grantfrom = #grantfrom:DATE#
            </isNotNull>
            <isNotNull prepend="," property="grantto">
                grantto = #grantto:DATE#
            </isNotNull>
            <isNotNull prepend="," property="bossemployeeid">
                bossemployeeid = #bossemployeeid:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="email">
                email = #email:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="areaId">
                area_id = #areaId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="divisionId">
                division_id = #divisionId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="departmentId">
                department_id = #departmentId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="stationId">
                station_id = #stationId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="jobTitleId">
                job_title_id = #jobTitleId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="levelId">
                level_id = #levelId:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="isactiveuser">
                isactiveuser = #isactiveuser:BIT#
            </isNotNull>
        </dynamic>
        where employee_id = #employeeId:VARCHAR#
    </update>
    <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.ckb.wo.client.model.User">
        <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 05 13:34:27 SGT 2010.
        -->
        update tuser
        set first_name = #firstName:VARCHAR#,
        middle_name = #middleName:VARCHAR#,
        last_name = #lastName:VARCHAR#,
        grantfrom = #grantfrom:DATE#,
        grantto = #grantto:DATE#,
        bossemployeeid = #bossemployeeid:VARCHAR#,
        email = #email:VARCHAR#,
        area_id = #areaId:VARCHAR#,
        division_id = #divisionId:VARCHAR#,
        department_id = #departmentId:VARCHAR#,
        station_id = #stationId:VARCHAR#,
        job_title_id = #jobTitleId:VARCHAR#,
        level_id = #levelId:VARCHAR#,
        isactiveuser = #isactiveuser:BIT#
        where employee_id = #employeeId:VARCHAR#
    </update>

    <!-- custom resultmap -->
    <resultMap class="com.ckb.wo.client.model.User" id="ResultMapBossEmployeeid">
        <result column="btuser_employee_id" jdbcType="VARCHAR" property="employeeId" />
        <result column="btuser_first_name" jdbcType="VARCHAR" property="firstName" />
        <result column="btuser_middle_name" jdbcType="VARCHAR" property="middleName" />
        <result column="btuser_last_name" jdbcType="VARCHAR" property="lastName" />
        <result column="btuser_grantfrom" jdbcType="DATE" property="grantfrom" />
        <result column="btuser_grantto" jdbcType="DATE" property="grantto" />
        <result column="btuser_bossemployeeid" jdbcType="VARCHAR" property="bossemployeeid" />
        <result column="btuser_email" jdbcType="VARCHAR" property="email" />
        <result column="btuser_area_id" jdbcType="VARCHAR" property="areaId" />
        <result column="btuser_division_id" jdbcType="VARCHAR" property="divisionId" />
        <result column="btuser_department_id" jdbcType="VARCHAR" property="departmentId" />
        <result column="btuser_station_id" jdbcType="VARCHAR" property="stationId" />
        <result column="btuser_job_title_id" jdbcType="VARCHAR" property="jobTitleId" />
        <result column="btuser_level_id" jdbcType="VARCHAR" property="levelId" />
        <result column="btuser_isactiveuser" jdbcType="BIT" property="isactiveuser" />
    </resultMap>

    <resultMap class="com.ckb.wo.client.model.User" extends="ibatorgenerated_BaseResultMap" groupBy="employeeId" id="ResultMapWithJoin">
        <result property="boss" resultMap="tuser.ResultMapBossEmployeeid"/>
        <result property="area" resultMap="tarea.ibatorgenerated_BaseResultMap"/>
        <result property="division" resultMap="tdivision.ResultMapJoinWithTuser"/>
        <result property="department" resultMap="tdepartment.ibatorgenerated_BaseResultMap"/>
        <result property="jobtitle" resultMap="tjobtitle.ResultMapJoinWithTuser"/>
        <result property="level" resultMap="tlevel.ResultMapJoinWithTuser"/>
    </resultMap>

    <resultMap class="com.ckb.wo.client.model.User" extends="tuser.ResultMapWithJoin" groupBy="employeeId" id="ResultMapWithRoles">
        <result property="roles" resultMap="trole.ibatorgenerated_BaseResultMap"/>
    </resultMap>

    <resultMap class="com.ckb.wo.client.model.User" extends="tuser.ibatorgenerated_BaseResultMap"  id="ResultMapWithLevel">
        <result property="level" resultMap="tlevel.ibatorgenerated_BaseResultMap"/>
    </resultMap>


    <!-- custom query -->
    <select id="selectEmployeeIdByExample" parameterClass="com.ckb.wo.client.model.UserExample" resultClass="java.lang.String">
        select employee_id from tuser atuser
        <isParameterPresent>
            <include refid="tuser.ibatorgenerated_Example_Where_Clause" />
            <isNotNull property="orderByClause">
                order by $orderByClause$
            </isNotNull>
            <isNotNull property="limitClause">
                limit $limitClause$
            </isNotNull>
        </isParameterPresent>
    </select>

    <sql id="sqlAllColumnFromTuser" >
        select atuser.employee_id as atuser_employee_id, atuser.first_name as atuser_first_name,
        atuser.middle_name as atuser_middle_name, atuser.last_name as atuser_last_name,
        atuser.grantfrom as atuser_grantfrom, atuser.grantto as atuser_grantto, atuser.bossemployeeid
        as atuser_bossemployeeid, atuser.email as atuser_email, atuser.area_id as atuser_area_id,
        atuser.division_id as atuser_division_id, atuser.department_id as atuser_department_id,
        atuser.station_id as atuser_station_id, atuser.job_title_id as atuser_job_title_id,
        atuser.level_id as atuser_level_id, atuser.isactiveuser as atuser_isactiveuser
    </sql>

    <sql  id="sqlTheRestOfColumnJoin" >
        ,btuser.employee_id as btuser_employee_id, btuser.first_name as btuser_first_name,
        btuser.middle_name as btuser_middle_name, btuser.last_name as btuser_last_name,
        btuser.grantfrom as btuser_grantfrom, btuser.grantto as btuser_grantto, btuser.bossemployeeid
        as btuser_bossemployeeid, btuser.email as btuser_email, btuser.area_id as btuser_area_id,
        btuser.division_id as btuser_division_id, btuser.department_id as btuser_department_id,
        btuser.station_id as btuser_station_id, btuser.job_title_id as btuser_job_title_id,
        btuser.level_id as btuser_level_id, btuser.isactiveuser as btuser_isactiveuser,
        tarea.area_id, tarea.areaname,
        tdivision.division_id, tdivision.description as tdivision_description,
        tdepartment.department_id, tdepartment.departmentname,
        tjobtitle.job_title_id, tjobtitle.description as tjobtitle_description,
        tlevel.level_id, tlevel.level_value, tlevel.description as tlevel_description
        from tuser atuser
        left outer join tuser btuser on atuser.bossemployeeid=btuser.employee_id
        left outer join tarea on atuser.area_id=tarea.area_id
        left outer join tdivision on atuser.division_id=tdivision.division_id
        left outer join tdepartment on atuser.department_id=tdepartment.department_id
        left outer join tjobtitle on atuser.job_title_id=tjobtitle.job_title_id
        left outer join tlevel on atuser.level_id=tlevel.level_id
    </sql>


    <sql id="sqlByExampleWithJoin" >
        <include refid="tuser.sqlAllColumnFromTuser"/>
        <include refid="tuser.sqlTheRestOfColumnJoin"/>
    </sql>

    <sql id="sqlUserWithRoles">
        <include refid="tuser.sqlAllColumnFromTuser"/>
        , trole.*
        <include refid="tuser.sqlTheRestOfColumnJoin"/>
        left outer join trole_tuser
        on atuser.employee_id=trole_tuser.employee_id
        left outer join trole
        on trole_tuser.trole_fk=trole.trole_pk
    </sql>

    <select id="getUserLevelValueByEmployeeId" parameterClass="java.lang.String" resultClass="java.lang.Integer">
        select level_value from tlevel left outer join tuser on tlevel.level_id=tuser.level_id where
        tuser.employee_id=#value#
    </select>
    
    <select id="getFinalUserApprovalWO" parameterClass="java.lang.Long" resultMap="tuser.ResultMapWithLevel">
        <include refid="tuser.sqlAllColumnFromTuser"/>
        ,tlevel.*
        from tuser atuser left outer join tlevel
        on atuser.level_id=tlevel.level_id
        WHERE atuser.employee_id IN
        (
        SELECT tworkorderflow.employeeid from tworkorderflow where tworkorderflow_pk=(select max(tworkorderflow_pk) from tworkorderflow where oldwostatus='APPROVED' and tworkorder_fk=#value#)
        )
    </select>
    <!--
        buat select diatas...
        
        SELECT tworkorderflow.employeeid
        FROM tworkorderflow,tworkorder,tlevel
        WHERE tworkorderflow.level_id=tlevel.level_id
        AND tworkorder.tworkorder_pk=tworkorderflow.tworkorder_fk
        AND tworkorderflow.oldwostatus='APPROVED'
        AND tworkorder.tworkorder_pk=#value# AND tworkorder.maxlevel=tlevel.level_value
        order by tworkorderflow.tworkorderflow_pk desc
    -->
    <select id="getAllUserAlreadyCreateWO" resultMap="tuser.ibatorgenerated_BaseResultMap">
        <include refid="tuser.sqlAllColumnFromTuser"/>
        from tuser atuser where atuser.employee_id in (select distinct tworkorder.createdbyemployeeid from tworkorder)
        order by atuser.first_name ASC
    </select>
    <select id="getFinalUserCancellationWO" parameterClass="java.lang.Long" resultMap="tuser.ResultMapWithLevel">
        <include refid="tuser.sqlAllColumnFromTuser"/>
        ,tlevel.*
        from tuser atuser left outer join tlevel
        on atuser.level_id=tlevel.level_id
        WHERE atuser.employee_id IN
        (SELECT tworkorderflow.employeeid
        FROM tworkorderflow,tworkorder,tlevel
        WHERE tworkorderflow.level_id=tlevel.level_id
        AND tworkorder.tworkorder_pk=tworkorderflow.tworkorder_fk
        AND tworkorderflow.oldwostatus='CANCELLED'
        AND tworkorder.tworkorder_pk=#value# 
        order by tworkorderflow.tworkorderflow_pk desc )
    </select>


    <select id="getNextUserForThisWorkOrder" parameterClass="java.lang.Long" resultMap="ibatorgenerated_BaseResultMap">
        <include refid="tuser.sqlAllColumnFromTuser"/>
        from tuser atuser WHERE atuser.employee_id =
        ( SELECT bossemployeeid FROM tuser WHERE employee_id =
        ( SELECT tworkorderflow.employeeid FROM tworkorderflow, tworkorder, tlevel
        WHERE tworkorder.tworkorder_pk=tworkorderflow.tworkorder_fk
        AND tworkorderflow.level_id=tlevel.level_id
        AND tlevel.level_value=tworkorder.lasttlevel
        AND tworkorder_pk=#value#
        limit 0,1
        )
        )
    </select>

    <select id="selectByExampleWithJoin" parameterClass="com.ckb.wo.client.model.UserExample" resultMap="tuser.ResultMapWithJoin"  >
        <include refid="tuser.sqlByExampleWithJoin"/>
        <isParameterPresent>
            <include refid="tuser.ibatorgenerated_Example_Where_Clause" />
            <isNotNull property="orderByClause">
                order by $orderByClause$
            </isNotNull>
            <isNotNull property="limitClause">
                limit $limitClause$
            </isNotNull>
        </isParameterPresent>
    </select>
    
    <select id="selectByPrimaryKeyWithJoin"  parameterClass="com.ckb.wo.client.model.User" resultMap="tuser.ResultMapWithJoin">
        <include refid="tuser.sqlByExampleWithJoin"/>
        where atuser.employee_id = #employeeId:VARCHAR#
    </select>

    <select id="selectByPrimaryKeyWithRoles" parameterClass="java.lang.String" resultMap="ResultMapWithRoles">
        <include refid="tuser.sqlUserWithRoles"/>
        where atuser.employee_id=#value#
    </select>

    <select id="selectByExampleWithRoles" parameterClass="com.ckb.wo.client.model.UserExample" resultMap="ResultMapWithRoles">
        <include refid="tuser.sqlUserWithRoles"/>
        <isParameterPresent>
            <include refid="tuser.ibatorgenerated_Example_Where_Clause" />
            <isNotNull property="orderByClause">
                order by $orderByClause$
            </isNotNull>
            <isNotNull property="limitClause">
                limit $limitClause$
            </isNotNull>
        </isParameterPresent>
    </select>

    <select id="countUsersOneLevelAbove" parameterClass="com.ckb.wo.client.model.UserExample" resultClass="java.lang.Integer" >
        select count(employee_id) from tuser left outer join tlevel
        on tuser.level_id=tlevel.level_id
        <isParameterPresent>
            <include refid="tuser.ibatorgenerated_Example_Where_Clause" />
        </isParameterPresent>
    </select>

    <select id="selectUsersOneLevelAbove" parameterClass="com.ckb.wo.client.model.UserExample" resultMap="ibatorgenerated_BaseResultMap">
        select atuser.employee_id as atuser_employee_id, atuser.first_name as atuser_first_name,
        atuser.middle_name as atuser_middle_name, atuser.last_name as atuser_last_name,
        atuser.grantfrom as atuser_grantfrom, atuser.grantto as atuser_grantto, atuser.bossemployeeid
        as atuser_bossemployeeid, atuser.email as atuser_email, atuser.area_id as atuser_area_id,
        atuser.division_id as atuser_division_id, atuser.department_id as atuser_department_id,
        atuser.station_id as atuser_station_id, atuser.job_title_id as atuser_job_title_id,
        atuser.level_id as atuser_level_id, atuser.isactiveuser as atuser_isactiveuser
        from tuser atuser
        left outer join tlevel on
        atuser.level_id=tlevel.level_id
        <isParameterPresent>
            <include refid="tuser.ibatorgenerated_Example_Where_Clause" />
            <isNotNull property="orderByClause">
                order by $orderByClause$
            </isNotNull>
            <isNotNull property="limitClause">
                limit $limitClause$
            </isNotNull>
        </isParameterPresent>
    </select>

    <!--  end of custom query -->

</sqlMap>