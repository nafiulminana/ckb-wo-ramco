<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="tworkorder_smodedetail">
    <resultMap class="com.ckb.wo.client.model.WorkOrderServiceModeDetail" id="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 26 15:08:34 SGT 2010.
    -->
        <result column="tworkorder_smodedetail_pk" jdbcType="LONG" property="tworkorderSmodedetailPk" />
        <result column="tworkorder_fk" jdbcType="BIGINT" property="tworkorderFk" />
        <result column="tservicemodedetail_fk" jdbcType="LONG" property="tservicemodedetailFk" />
        <result column="quantity" jdbcType="DOUBLE" property="quantity" />
        <result column="smdcharge" jdbcType="DECIMAL" property="smdcharge" />
        <result column="smdremarks" jdbcType="VARCHAR" property="smdremarks" />
        <result column="smdtcurrency_fk" jdbcType="LONG" property="smdtcurrencyFk" />
    </resultMap>
    <sql id="ibatorgenerated_Example_Where_Clause">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 26 15:08:34 SGT 2010.
    -->
        <iterate conjunction="or" prepend="where" property="oredCriteria" removeFirstPrepend="iterate">
            <isEqual compareValue="true" property="oredCriteria[].valid">
        (
                <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithoutValue">
          $oredCriteria[].criteriaWithoutValue[]$
                </iterate>
                <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithSingleValue">
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
                </iterate>
                <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithListValue">
          $oredCriteria[].criteriaWithListValue[].condition$
                    <iterate close=")" conjunction="," open="(" property="oredCriteria[].criteriaWithListValue[].values">
            #oredCriteria[].criteriaWithListValue[].values[]#
                    </iterate>
                </iterate>
                <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithBetweenValue">
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
                </iterate>
        )
            </isEqual>
        </iterate>
    </sql>
    <select id="ibatorgenerated_selectByExample" parameterClass="com.ckb.wo.client.model.WorkOrderServiceModeDetailExample" resultMap="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 26 15:08:34 SGT 2010.
    -->
    select tworkorder_smodedetail_pk, tworkorder_fk, tservicemodedetail_fk, quantity, smdcharge,
      smdremarks, smdtcurrency_fk
    from tworkorder_smodedetail
        <isParameterPresent>
            <include refid="tworkorder_smodedetail.ibatorgenerated_Example_Where_Clause" />
            <isNotNull property="orderByClause">
        order by $orderByClause$
            </isNotNull>
            <isNotNull property="limitClause">
        limit $limitClause$
            </isNotNull>
        </isParameterPresent>
    </select>
    <select id="ibatorgenerated_selectByPrimaryKey" parameterClass="com.ckb.wo.client.model.WorkOrderServiceModeDetail" resultMap="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 26 15:08:34 SGT 2010.
    -->
    select tworkorder_smodedetail_pk, tworkorder_fk, tservicemodedetail_fk, quantity, smdcharge,
      smdremarks, smdtcurrency_fk
    from tworkorder_smodedetail
    where tworkorder_smodedetail_pk = #tworkorderSmodedetailPk:LONG#
    </select>
    <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.ckb.wo.client.model.WorkOrderServiceModeDetail">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 26 15:08:34 SGT 2010.
    -->
    delete from tworkorder_smodedetail
    where tworkorder_smodedetail_pk = #tworkorderSmodedetailPk:LONG#
    </delete>
    <delete id="ibatorgenerated_deleteByExample" parameterClass="com.ckb.wo.client.model.WorkOrderServiceModeDetailExample">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 26 15:08:34 SGT 2010.
    -->
    delete from tworkorder_smodedetail
        <include refid="tworkorder_smodedetail.ibatorgenerated_Example_Where_Clause" />
    </delete>
    <insert id="ibatorgenerated_insert" parameterClass="com.ckb.wo.client.model.WorkOrderServiceModeDetail">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 26 15:08:34 SGT 2010.
    -->
    insert into tworkorder_smodedetail (tworkorder_fk, tservicemodedetail_fk, quantity, smdcharge,
      smdremarks, smdtcurrency_fk)
    values (#tworkorderFk:BIGINT#, #tservicemodedetailFk:LONG#, #quantity:DOUBLE#,
      #smdcharge:DECIMAL#, #smdremarks:VARCHAR#, #smdtcurrencyFk:LONG#)
        <selectKey keyProperty="tworkorderSmodedetailPk" resultClass="java.lang.Long">
      SELECT LAST_INSERT_ID()
        </selectKey>
    </insert>
    <insert id="ibatorgenerated_insertSelective" parameterClass="com.ckb.wo.client.model.WorkOrderServiceModeDetail">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 26 15:08:34 SGT 2010.
    -->
    insert into tworkorder_smodedetail
        <dynamic prepend="(">
            <isNotNull prepend="," property="tworkorderFk">
        tworkorder_fk
            </isNotNull>
            <isNotNull prepend="," property="tservicemodedetailFk">
        tservicemodedetail_fk
            </isNotNull>
            <isNotNull prepend="," property="quantity">
        quantity
            </isNotNull>
            <isNotNull prepend="," property="smdcharge">
        smdcharge
            </isNotNull>
            <isNotNull prepend="," property="smdremarks">
        smdremarks
            </isNotNull>
            <isNotNull prepend="," property="smdtcurrencyFk">
        smdtcurrency_fk
            </isNotNull>
      )
        </dynamic>
    values
        <dynamic prepend="(">
            <isNotNull prepend="," property="tworkorderFk">
        #tworkorderFk:BIGINT#
            </isNotNull>
            <isNotNull prepend="," property="tservicemodedetailFk">
        #tservicemodedetailFk:LONG#
            </isNotNull>
            <isNotNull prepend="," property="quantity">
        #quantity:DOUBLE#
            </isNotNull>
            <isNotNull prepend="," property="smdcharge">
        #smdcharge:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="smdremarks">
        #smdremarks:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="smdtcurrencyFk">
        #smdtcurrencyFk:LONG#
            </isNotNull>
      )
        </dynamic>
        <selectKey keyProperty="tworkorderSmodedetailPk" resultClass="java.lang.Long">
      SELECT LAST_INSERT_ID()
        </selectKey>
    </insert>
    <select id="ibatorgenerated_countByExample" parameterClass="com.ckb.wo.client.model.WorkOrderServiceModeDetailExample" resultClass="java.lang.Integer">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 26 15:08:34 SGT 2010.
    -->
    select count(*) from tworkorder_smodedetail
        <include refid="tworkorder_smodedetail.ibatorgenerated_Example_Where_Clause" />
    </select>
    <update id="ibatorgenerated_updateByExampleSelective">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 26 15:08:34 SGT 2010.
    -->
    update tworkorder_smodedetail
        <dynamic prepend="set">
            <isNotNull prepend="," property="record.tworkorderSmodedetailPk">
        tworkorder_smodedetail_pk = #record.tworkorderSmodedetailPk:LONG#
            </isNotNull>
            <isNotNull prepend="," property="record.tworkorderFk">
        tworkorder_fk = #record.tworkorderFk:BIGINT#
            </isNotNull>
            <isNotNull prepend="," property="record.tservicemodedetailFk">
        tservicemodedetail_fk = #record.tservicemodedetailFk:LONG#
            </isNotNull>
            <isNotNull prepend="," property="record.quantity">
        quantity = #record.quantity:DOUBLE#
            </isNotNull>
            <isNotNull prepend="," property="record.smdcharge">
        smdcharge = #record.smdcharge:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="record.smdremarks">
        smdremarks = #record.smdremarks:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="record.smdtcurrencyFk">
        smdtcurrency_fk = #record.smdtcurrencyFk:LONG#
            </isNotNull>
        </dynamic>
        <isParameterPresent>
            <include refid="tworkorder_smodedetail.ibatorgenerated_Example_Where_Clause" />
        </isParameterPresent>
    </update>
    <update id="ibatorgenerated_updateByExample">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 26 15:08:34 SGT 2010.
    -->
    update tworkorder_smodedetail
    set tworkorder_smodedetail_pk = #record.tworkorderSmodedetailPk:LONG#,
      tworkorder_fk = #record.tworkorderFk:BIGINT#,
      tservicemodedetail_fk = #record.tservicemodedetailFk:LONG#,
      quantity = #record.quantity:DOUBLE#,
      smdcharge = #record.smdcharge:DECIMAL#,
      smdremarks = #record.smdremarks:VARCHAR#,
      smdtcurrency_fk = #record.smdtcurrencyFk:LONG#
        <isParameterPresent>
            <include refid="tworkorder_smodedetail.ibatorgenerated_Example_Where_Clause" />
        </isParameterPresent>
    </update>
    <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.ckb.wo.client.model.WorkOrderServiceModeDetail">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 26 15:08:34 SGT 2010.
    -->
    update tworkorder_smodedetail
        <dynamic prepend="set">
            <isNotNull prepend="," property="tworkorderFk">
        tworkorder_fk = #tworkorderFk:BIGINT#
            </isNotNull>
            <isNotNull prepend="," property="tservicemodedetailFk">
        tservicemodedetail_fk = #tservicemodedetailFk:LONG#
            </isNotNull>
            <isNotNull prepend="," property="quantity">
        quantity = #quantity:DOUBLE#
            </isNotNull>
            <isNotNull prepend="," property="smdcharge">
        smdcharge = #smdcharge:DECIMAL#
            </isNotNull>
            <isNotNull prepend="," property="smdremarks">
        smdremarks = #smdremarks:VARCHAR#
            </isNotNull>
            <isNotNull prepend="," property="smdtcurrencyFk">
        smdtcurrency_fk = #smdtcurrencyFk:LONG#
            </isNotNull>
        </dynamic>
    where tworkorder_smodedetail_pk = #tworkorderSmodedetailPk:LONG#
    </update>
    <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.ckb.wo.client.model.WorkOrderServiceModeDetail">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Aug 26 15:08:34 SGT 2010.
    -->
    update tworkorder_smodedetail
    set tworkorder_fk = #tworkorderFk:BIGINT#,
      tservicemodedetail_fk = #tservicemodedetailFk:LONG#,
      quantity = #quantity:DOUBLE#,
      smdcharge = #smdcharge:DECIMAL#,
      smdremarks = #smdremarks:VARCHAR#,
      smdtcurrency_fk = #smdtcurrencyFk:LONG#
    where tworkorder_smodedetail_pk = #tworkorderSmodedetailPk:LONG#
    </update>
  <!-- custom resultMap -->
    <resultMap class="com.ckb.wo.client.model.WorkOrderServiceModeDetail" extends="ibatorgenerated_BaseResultMap" id="ResultMapWithJoin">
        <result property="servicemodeDetail" resultMap="tservicemodedetail.ibatorgenerated_BaseResultMap" />
    </resultMap>
  
  <resultMap class="com.ckb.wo.client.model.WorkOrderServiceModeDetail" groupBy="servicemodeDetail.tservicemodedetailPk,smdremarks" id="ResultMapForJoinWithWorkOrder">
<!--  <resultMap class="com.ckb.wo.client.model.WorkOrderServiceModeDetail" id="ResultMapForJoinWithWorkOrder">-->
        <result column="tservicemodedetail_fk" jdbcType="LONG" property="tservicemodedetailFk" />
        <result column="quantity" jdbcType="INTEGER" property="quantity" />
        <result column="smdcharge" jdbcType="DECIMAL" property="smdcharge" />
        <result column="smdremarks" jdbcType="VARCHAR" property="smdremarks" />
        <result column="smdtcurrency_fk" jdbcType="LONG" property="smdtcurrencyFk" />
        <result column="smdcode" property="servicemodeDetail.smdcode" />
        <result column="smdname" property="servicemodeDetail.smdname" />
        <result column="tservicemodedetail_pk" jdbcType="LONG" property="servicemodeDetail.tservicemodedetailPk" />
        <result column="wosmd_tcurrency_pk" property="currency.tcurrencyPk" />
        <result column="wosmd_currencycode" property="currency.currencycode" />
        <result column="wosmd_currencyname" property="currency.currencyname" />
    </resultMap>

    <resultMap class="com.ckb.wo.client.model.WorkOrderServiceModeDetail" id="ResultMapForSubTotal">
        <result column="tworkorder_fk" jdbcType="LONG" property="tworkorderFk" />
        <result column="subtotal" jdbcType="DECIMAL" property="subtotal" />
        <result property="currency" resultMap="tcurrency.ibatorgenerated_BaseResultMap" />
    </resultMap>

  <!--
  <resultMap class="com.ckb.wo.client.model.WorkOrderServiceModeDetail"  id="ResultMapWithJoinCurrencyAndServiceModeDetail">
    <result column="tservicemodedetail_fk" jdbcType="LONG" property="tservicemodedetailFk" />
    <result column="quantity" jdbcType="INTEGER" property="quantity" />
    <result column="smdcharge" jdbcType="DECIMAL" property="smdcharge" />
    <result column="smdremarks" jdbcType="VARCHAR" property="smdremarks" />
    <result column="smdtcurrency_fk" jdbcType="LONG" property="smdtcurrencyFk" />
    <result property="servicemodeDetail" resultMap="tservicemodedetail.ibatorgenerated_BaseResultMap" />
    <result property="currency" resultMap="tcurrency.ibatorgenerated_BaseResultMap" />
  </resultMap>
  -->
  <!-- end of custom resultMap -->
  <!-- custom query -->
    <select id="selectByTWorkOrderPk" parameterClass="java.lang.Long" resultMap="ibatorgenerated_BaseResultMap">
    select *
    from tworkorder_smodedetail
    where tworkorder_fk = #tworkorder_fk:LONG#
    </select>
  
    <sql id="sqlJoinWithServiceModeDetail">
    select tworkorder_smodedetail.*, tservicemodedetail.*
    from tworkorder_smodedetail left outer join tservicemodedetail
    on tworkorder_smodedetail.tservicemodedetail_fk=tservicemodedetail.tservicemodedetail_pk  
    </sql>
  
    <select id="selectByTWorkOrderPkWithJoin" parameterClass="java.lang.Long" resultMap="ResultMapWithJoin">
        <include refid="tworkorder_smodedetail.sqlJoinWithServiceModeDetail" />
    where tworkorder_fk = #tworkorder_fk:LONG#
    </select>

    <select id="selectByExampleWithJoin" parameterClass="com.ckb.wo.client.model.WorkOrderServiceModeDetailExample" resultMap="ResultMapWithJoin">
        <include refid="tworkorder_smodedetail.sqlJoinWithServiceModeDetail" />
        <isParameterPresent>
            <include refid="tworkorder_smodedetail.ibatorgenerated_Example_Where_Clause" />
            <isNotNull property="orderByClause">
        order by $orderByClause$
            </isNotNull>
            <isNotNull property="limitClause">
        limit $limitClause$
            </isNotNull>
        </isParameterPresent>
    </select>
  
    <select id="selectByPrimaryKeyWithJoin" parameterClass="java.lang.Long" resultMap="ResultMapWithJoin">
    select * from tworkorder_smodedetail
    where tworkorder_smodedetail_pk = #tworkorder_smodedetailPk:LONG#
    </select>
  
    <select id="selectForSubTotal" parameterClass="java.lang.Long" resultMap="ResultMapForSubTotal">
  	select tworkorder_fk, sum(smdcharge * CAST(quantity as CHAR)) as subtotal, tcurrency.*
  	from tworkorder_smodedetail left outer join tcurrency
  	on tworkorder_smodedetail.smdtcurrency_fk=tcurrency.tcurrency_pk
  	where tworkorder_fk=#value# GROUP BY smdtcurrency_fk
    </select>

  <!--
  <select id="selectByExampleWithJoinCurrencyAndServiceModeDetail" parameterClass="java.lang.Long" resultMap="ResultMapWithJoinCurrencyAndServiceModeDetail" >
        select tworkorder_smodedetail.*, tservicemodedetail.*, tcurrency.*
        from tworkorder_smodedetail left outer join tservicemodedetail
        on tworkorder_smodedetail.tservicemodedetail_fk=tservicemodedetail.tservicemodedetail_pk
        left outer join tcurrency
        on tworkorder_smodedetail.smdtcurrency_fk=tcurrency.tcurrency_pk
        where tworkorder_smodedetail.tworkorder_fk=#value#
  </select>
  -->
  <!-- end of custom query -->
  
</sqlMap>