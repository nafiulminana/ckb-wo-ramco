<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="t_shipment" >
    <resultMap id="ibatorgenerated_BaseResultMap" class="com.ckb.wo.client.model.Shipment" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Jul 10 13:45:16 SGT 2010.
    -->
        <result column="da" property="da" jdbcType="DECIMAL" />
        <result column="created_by" property="createdBy" jdbcType="VARCHAR" />
        <result column="transportation_type_id" property="transportationTypeId" jdbcType="CHAR" />
        <result column="service_type_id" property="serviceTypeId" jdbcType="CHAR" />
        <result column="package_type_id" property="packageTypeId" jdbcType="CHAR" />
        <result column="origin" property="origin" jdbcType="CHAR" />
        <result column="destination" property="destination" jdbcType="CHAR" />
        <result column="shipper_account" property="shipperAccount" jdbcType="DOUBLE" />
        <result column="shipper_name" property="shipperName" jdbcType="VARCHAR" />
        <result column="shipper_company" property="shipperCompany" jdbcType="VARCHAR" />
        <result column="shipper_address1" property="shipperAddress1" jdbcType="VARCHAR" />
        <result column="shipper_address2" property="shipperAddress2" jdbcType="VARCHAR" />
        <result column="shipper_city" property="shipperCity" jdbcType="VARCHAR" />
        <result column="shipper_state" property="shipperState" jdbcType="VARCHAR" />
        <result column="shipper_country_id" property="shipperCountryId" jdbcType="CHAR" />
        <result column="shipper_zip" property="shipperZip" jdbcType="VARCHAR" />
        <result column="shipper_phone" property="shipperPhone" jdbcType="VARCHAR" />
        <result column="consignee_account" property="consigneeAccount" jdbcType="DOUBLE" />
        <result column="consignee_name" property="consigneeName" jdbcType="VARCHAR" />
        <result column="consignee_company" property="consigneeCompany" jdbcType="VARCHAR" />
        <result column="consignee_address1" property="consigneeAddress1" jdbcType="VARCHAR" />
        <result column="consignee_address2" property="consigneeAddress2" jdbcType="VARCHAR" />
        <result column="consignee_city" property="consigneeCity" jdbcType="VARCHAR" />
        <result column="consignee_state" property="consigneeState" jdbcType="VARCHAR" />
        <result column="consignee_country_id" property="consigneeCountryId" jdbcType="CHAR" />
        <result column="consignee_zip" property="consigneeZip" jdbcType="VARCHAR" />
        <result column="consignee_phone" property="consigneePhone" jdbcType="VARCHAR" />
        <result column="tot_package" property="totPackage" jdbcType="INTEGER" />
        <result column="tot_weight" property="totWeight" jdbcType="DOUBLE" />
        <result column="tot_dim" property="totDim" jdbcType="DOUBLE" />
        <result column="tot_value" property="totValue" jdbcType="DOUBLE" />
        <result column="actual_weight" property="actualWeight" jdbcType="DOUBLE" />
        <result column="invoice_to" property="invoiceTo" jdbcType="VARCHAR" />
        <result column="invoice_to_acct" property="invoiceToAcct" jdbcType="DOUBLE" />
        <result column="bill_dt" property="billDt" jdbcType="VARCHAR" />
        <result column="bill_dt_acct" property="billDtAcct" jdbcType="DOUBLE" />
        <result column="cons_no" property="consNo" jdbcType="DOUBLE" />
        <result column="special_handling_type_id" property="specialHandlingTypeId" jdbcType="CHAR" />
        <result column="desc_of_goods" property="descOfGoods" jdbcType="VARCHAR" />
        <result column="received_at_type_id" property="receivedAtTypeId" jdbcType="CHAR" />
        <result column="carrier_value" property="carrierValue" jdbcType="DOUBLE" />
        <result column="customs_value" property="customsValue" jdbcType="DOUBLE" />
        <result column="currency_id" property="currencyId" jdbcType="CHAR" />
        <result column="reference_desc" property="referenceDesc" jdbcType="VARCHAR" />
        <result column="special_instructions" property="specialInstructions" jdbcType="VARCHAR" />
        <result column="flag_no_mps" property="flagNoMps" jdbcType="CHAR" />
        <result column="flag_deleted" property="flagDeleted" jdbcType="CHAR" />
        <result column="flag_invoiced" property="flagInvoiced" jdbcType="CHAR" />
        <result column="flag_dangerous_goods" property="flagDangerousGoods" jdbcType="CHAR" />
        <result column="flag_quotation" property="flagQuotation" jdbcType="CHAR" />
        <result column="flag_quote" property="flagQuote" jdbcType="CHAR" />
        <result column="quotation_no" property="quotationNo" jdbcType="VARCHAR" />
        <result column="flag_project" property="flagProject" jdbcType="CHAR" />
        <result column="dangerous_goods_id" property="dangerousGoodsId" jdbcType="VARCHAR" />
        <result column="deleted_note" property="deletedNote" jdbcType="VARCHAR" />
        <result column="width" property="width" jdbcType="DOUBLE" />
        <result column="length" property="length" jdbcType="DOUBLE" />
        <result column="height" property="height" jdbcType="DOUBLE" />
        <result column="delivery_term" property="deliveryTerm" jdbcType="CHAR" />
        <result column="remarks" property="remarks" jdbcType="VARCHAR" />
        <result column="flag_web_booking" property="flagWebBooking" jdbcType="CHAR" />
        <result column="flag_web_complete" property="flagWebComplete" jdbcType="CHAR" />
        <result column="flag_hold_invoice" property="flagHoldInvoice" jdbcType="CHAR" />
        <result column="case_no" property="caseNo" jdbcType="VARCHAR" />
        <result column="flag_foc" property="flagFoc" jdbcType="CHAR" />
        <result column="flag_ready_invoice" property="flagReadyInvoice" jdbcType="CHAR" />
        <result column="cargo_type" property="cargoType" jdbcType="CHAR" />
        <result column="pickup_no" property="pickupNo" jdbcType="INTEGER" />
        <result column="grand_total_weight" property="grandTotalWeight" jdbcType="DOUBLE" />
        <result column="grand_total_volume" property="grandTotalVolume" jdbcType="DOUBLE" />
        <!--<result column="pickup_datetime" property="pickupDatetime" jdbcType="TIMESTAMP" />-->
        <result column="last_manifest_no" property="lastManifestNo" jdbcType="DOUBLE" />
        <result column="flag_sx_printed" property="flagSxPrinted" jdbcType="CHAR" />
        <result column="flag_inv_approved" property="flagInvApproved" jdbcType="CHAR" />
        <result column="reject_code" property="rejectCode" jdbcType="CHAR" />
        <result column="additional_remarks" property="additionalRemarks" jdbcType="VARCHAR" />
        <result column="revised_no" property="revisedNo" jdbcType="TINYINT" />
        <result column="invoice_batch_no" property="invoiceBatchNo" jdbcType="INTEGER" />
        <result column="flag_hold_da" property="flagHoldDa" jdbcType="CHAR" />
        <result column="hold_reason" property="holdReason" jdbcType="CHAR" />
        <result column="hold_by" property="holdBy" jdbcType="VARCHAR" />
        <result column="release_by" property="releaseBy" jdbcType="VARCHAR" />
        <result column="hold_comment" property="holdComment" jdbcType="VARCHAR" />
        <result column="reject_release_by" property="rejectReleaseBy" jdbcType="VARCHAR" />
        <result column="flag_shipment_received" property="flagShipmentReceived" jdbcType="ENUM" />
        <result column="quotation_release_by" property="quotationReleaseBy" jdbcType="VARCHAR" />
        <result column="user_updated" property="userUpdated" jdbcType="VARCHAR" />
        <result column="datetime_updated" property="datetimeUpdated" jdbcType="TIMESTAMP" />
        <result column="flag_doc_completed" property="flagDocCompleted" jdbcType="CHAR" />
    </resultMap>
    <resultMap id="ibatorgenerated_ResultMapWithBLOBs" class="com.ckb.wo.client.model.Shipment" extends="t_shipment.ibatorgenerated_BaseResultMap" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Jul 10 13:45:16 SGT 2010.
    -->
        <result column="terms" property="terms" jdbcType="LONGVARCHAR" />
    </resultMap>
    <select id="selectDAMPSNotPOD" resultMap="ibatorgenerated_ResultMapWithBLOBs" parameterClass="com.ckb.wo.client.model.Shipment" >
        (select t_shipment.da, t_shipment.created_by, transportation_type_id, service_type_id, package_type_id, origin,
      destination, shipper_account, shipper_name, shipper_company, shipper_address1,
      shipper_address2, shipper_city, shipper_state, shipper_country_id, shipper_zip, shipper_phone,
      consignee_account, consignee_name, consignee_company, consignee_address1, consignee_address2,
      consignee_city, consignee_state, consignee_country_id, consignee_zip, consignee_phone,
      tot_package, tot_weight, tot_dim, tot_value, actual_weight, t_shipment.invoice_to, invoice_to_acct,
      bill_dt, bill_dt_acct, cons_no, special_handling_type_id, desc_of_goods, received_at_type_id,
      carrier_value, customs_value, currency_id, reference_desc, special_instructions, flag_no_mps,
      flag_deleted, flag_invoiced, flag_dangerous_goods, flag_quotation, flag_quote, quotation_no,
      flag_project, dangerous_goods_id, deleted_note, width, length, height, delivery_term, remarks,
      flag_web_booking, flag_web_complete, flag_hold_invoice, case_no, flag_foc, flag_ready_invoice,
      cargo_type, pickup_no, grand_total_weight, grand_total_volume, pickup_datetime,
      last_manifest_no, flag_sx_printed, flag_inv_approved, reject_code, additional_remarks,
      revised_no, invoice_batch_no, flag_hold_da, hold_reason, hold_by, release_by, hold_comment,
      reject_release_by, flag_shipment_received, quotation_release_by, t_shipment.user_updated,
      t_shipment.datetime_updated, flag_doc_completed, terms
    from t_shipment left join t_pod on t_shipment.da = t_pod.da
    where t_pod.da is null and t_shipment.flag_deleted = 'N' and t_shipment.created_date > DATE_SUB(curdate(),INTERVAL 3 MONTH)
    and t_shipment.da = #da:DECIMAL#
    )union(
    select m.mps da, m.created_by, transportation_type_id, service_type_id, package_type_id, origin,
          destination, shipper_account, shipper_name, shipper_company, shipper_address1,
          shipper_address2, shipper_city, shipper_state, shipper_country_id, shipper_zip, shipper_phone,
          consignee_account, consignee_name, consignee_company, consignee_address1, consignee_address2,
          consignee_city, consignee_state, consignee_country_id, consignee_zip, consignee_phone,
          tot_package, tot_weight, tot_dim, tot_value, actual_weight, s.invoice_to, invoice_to_acct,
          bill_dt, bill_dt_acct, m.cons_no, special_handling_type_id, desc_of_goods, received_at_type_id,
          carrier_value, customs_value, currency_id, reference_desc, special_instructions, flag_no_mps,
          m.flag_deleted, flag_invoiced, m.flag_dangerous_goods, flag_quotation, flag_quote, quotation_no,
          flag_project, dangerous_goods_id, m.deleted_note, m.width, m.length, m.height, delivery_term, remarks,
          flag_web_booking, flag_web_complete, flag_hold_invoice, m.case_no, flag_foc, flag_ready_invoice,
          cargo_type, pickup_no, grand_total_weight, grand_total_volume, pickup_datetime,
          m.last_manifest_no, flag_sx_printed, flag_inv_approved, reject_code, additional_remarks,
          revised_no, invoice_batch_no, flag_hold_da, hold_reason, hold_by, release_by, hold_comment,
          reject_release_by, m.flag_shipment_received, quotation_release_by, m.user_updated,
          m.datetime_updated, flag_doc_completed, terms
    from t_mps m inner join t_shipment s on m.da=s.da
    left join t_pod on m.mps = t_pod.da
    where t_pod.da is null and m.flag_deleted = 'N' and m.created_date > DATE_SUB(curdate(),INTERVAL 3 MONTH)
    and mps = #da:DECIMAL#)
    </select>
    <select id="ibatorgenerated_selectByPrimaryKey" resultMap="ibatorgenerated_ResultMapWithBLOBs" parameterClass="com.ckb.wo.client.model.Shipment" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Jul 10 13:45:16 SGT 2010.
    -->
    (select t_shipment.da, t_shipment.created_by, transportation_type_id, service_type_id, package_type_id, origin,
      destination, shipper_account, shipper_name, shipper_company, shipper_address1,
      shipper_address2, shipper_city, shipper_state, shipper_country_id, shipper_zip, shipper_phone,
      consignee_account, consignee_name, consignee_company, consignee_address1, consignee_address2,
      consignee_city, consignee_state, consignee_country_id, consignee_zip, consignee_phone,
      tot_package, tot_weight, tot_dim, tot_value, actual_weight, t_shipment.invoice_to, invoice_to_acct,
      bill_dt, bill_dt_acct, cons_no, special_handling_type_id, desc_of_goods, received_at_type_id,
      carrier_value, customs_value, currency_id, reference_desc, special_instructions, flag_no_mps,
      flag_deleted, flag_invoiced, flag_dangerous_goods, flag_quotation, flag_quote, quotation_no,
      flag_project, dangerous_goods_id, deleted_note, width, length, height, delivery_term, remarks,
      flag_web_booking, flag_web_complete, flag_hold_invoice, case_no, flag_foc, flag_ready_invoice,
      cargo_type, pickup_no, grand_total_weight, grand_total_volume, pickup_datetime,
      last_manifest_no, flag_sx_printed, flag_inv_approved, reject_code, additional_remarks,
      revised_no, invoice_batch_no, flag_hold_da, hold_reason, hold_by, release_by, hold_comment,
      reject_release_by, flag_shipment_received, quotation_release_by, t_shipment.user_updated,
      t_shipment.datetime_updated, flag_doc_completed, terms
    from t_shipment 
    where
    t_shipment.da = #da:DECIMAL#
    )union(
    select m.mps da, m.created_by, transportation_type_id, service_type_id, package_type_id, origin,
          destination, shipper_account, shipper_name, shipper_company, shipper_address1,
          shipper_address2, shipper_city, shipper_state, shipper_country_id, shipper_zip, shipper_phone,
          consignee_account, consignee_name, consignee_company, consignee_address1, consignee_address2,
          consignee_city, consignee_state, consignee_country_id, consignee_zip, consignee_phone,
          tot_package, tot_weight, tot_dim, tot_value, actual_weight, s.invoice_to, invoice_to_acct,
          bill_dt, bill_dt_acct, m.cons_no, special_handling_type_id, desc_of_goods, received_at_type_id,
          carrier_value, customs_value, currency_id, reference_desc, special_instructions, flag_no_mps,
          m.flag_deleted, flag_invoiced, m.flag_dangerous_goods, flag_quotation, flag_quote, quotation_no,
          flag_project, dangerous_goods_id, m.deleted_note, m.width, m.length, m.height, delivery_term, remarks,
          flag_web_booking, flag_web_complete, flag_hold_invoice, m.case_no, flag_foc, flag_ready_invoice,
          cargo_type, pickup_no, grand_total_weight, grand_total_volume, pickup_datetime,
          m.last_manifest_no, flag_sx_printed, flag_inv_approved, reject_code, additional_remarks,
          revised_no, invoice_batch_no, flag_hold_da, hold_reason, hold_by, release_by, hold_comment,
          reject_release_by, m.flag_shipment_received, quotation_release_by, m.user_updated,
          m.datetime_updated, flag_doc_completed, terms
    from t_mps m inner join t_shipment s on m.da=s.da
    where
    mps = #da:DECIMAL#)
    </select>
    <select id="countDAByPK" parameterClass="java.util.Map" resultClass="java.lang.Integer" >
        select count(*) from t_shipment left join t_pod on t_shipment.da = t_pod.da
        where
        t_pod.da is null and t_shipment.flag_deleted = 'N' and t_shipment.created_date > DATE_SUB(curdate(),INTERVAL 3 MONTH)
        <isParameterPresent>
            and cast(t_shipment.da as char) like #da#
        </isParameterPresent>
    </select>
    <select id="countMPSByPK" parameterClass="java.util.Map" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sat Jul 10 13:45:16 SGT 2010.
    -->
    
    select count(*) from t_mps m inner join t_shipment s on m.da=s.da
    left join t_pod on m.da = t_pod.da
    where
    t_pod.da is null and m.flag_deleted = 'N' and m.created_date > DATE_SUB(curdate(),INTERVAL 3 MONTH) 
        <isParameterPresent>
        and cast(m.mps as char) like #da#
        </isParameterPresent>
    </select>

  <!-- custom resultmap and custom query -->
    <resultMap id="ResultMapShipmentByDANoWithLike" class="com.ckb.wo.client.model.Shipment" >
        <result column="da" property="da" jdbcType="DECIMAL" />
        <result column="origin" property="origin" jdbcType="CHAR" />
        <result column="destination" property="destination" jdbcType="CHAR" />
        <result column="tot_package" property="totPackage" jdbcType="INTEGER" />
    </resultMap>


    <select id="selectShipmentByMPSNoWithLike" resultMap="ResultMapShipmentByDANoWithLike" parameterClass="java.util.Map" >
    select m.mps da, origin, destination, 1 tot_package
       from t_mps m inner join t_shipment s on m.da=s.da
    left join t_pod on m.da = t_pod.da
    where
    t_pod.da is null and m.flag_deleted = 'N' and m.created_date > DATE_SUB(curdate(),INTERVAL 3 MONTH)
        <isParameterPresent>
        and cast(m.mps as char) like #da#
        </isParameterPresent>

        <isParameterPresent>
            <isNotNull property="orderByClause">
        order by $orderByClause$
            </isNotNull>
            <isNotNull property="limitClause">
        limit $limitClause$
            </isNotNull>
        </isParameterPresent>
    </select>
    <select id="selectShipmentByDANoWithLike" resultMap="ResultMapShipmentByDANoWithLike" parameterClass="java.util.Map" >
    
    select t_shipment.da, origin, destination, tot_package
    from t_shipment left join t_pod on t_shipment.da = t_pod.da
    where
    t_pod.da is null and t_shipment.flag_deleted = 'N' and t_shipment.created_date > DATE_SUB(curdate(),INTERVAL 3 MONTH)
        <isParameterPresent>
        and cast(t_shipment.da as char) like #da#
        </isParameterPresent>
        <isParameterPresent>
            <isNotNull property="orderByClause">
        order by $orderByClause$
            </isNotNull>
            <isNotNull property="limitClause">
        limit $limitClause$
            </isNotNull>
        </isParameterPresent>
    </select>


  <!-- end of custom resultmap and custom query -->
</sqlMap>